<!doctype html>
<html>
	<head>
		<link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/map.css">
		<link rel="stylesheet" href="css/chat.css">
		<link rel="stylesheet" href="css/registration.css">
		<link rel="stylesheet" href="css/halflings.css">
	</head>
	<body ng-app='app'>

        <div id="main">
        	<div ng-view></div>
        </div>

		<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;language=en"></script>
		<script src="components/socket.io-client/socket.io.js"></script>
		<script src="components/angularjs/angular.js"></script>
		<script src="components/angularjs-scroll-glue/src/scrollglue.js"></script>
		<script src="components/angular-socket-io/socket.js"></script>
		<script src="components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
		<script src="components/lodash/dist/lodash.js"></script>
		<script src="components/angular-google-maps/dist/angular-google-maps.js"></script>
		<script src="components/angular-route/angular-route.js"></script>
		<script src="js/pharm/pharmApp.js"></script>
		<script src="js/ioSocketFactory.js"></script>
		<script src="js/msgOptionsServiceFactory.js"></script>
		<script src="js/pharm/markerCreatorServiceFactory.js"></script>
		<script src="js/pharm/conversationServiceFactory.js"></script>
		<script src="js/pharm/pharmacistService.js"></script>
		<script src="js/pharm/signup.js"></script>
		<script src="js/pharm/chatTabController.js"></script>
		<script src="js/pharm/conversationController.js"></script>
		<script src="js/pharm/mapController.js"></script>
		<script src="js/pharm/pharmMessageController.js"></script>
		<script src="js/pharm/loginController.js"></script>
		<script src="js/pharm/registrationController.js"></script>
		<script src="js/pharm/validCharsDirective.js"></script>
		<script src="js/pharm/validOrgDirective.js"></script>

		<script>
		//TODO: move these two directives into their own file
			var app = angular.module('app').directive('match', [function () {
				return {
					require: 'ngModel',
					controllerAs: 'vm',
					link: function (scope, elem, attrs, ctrl) {

						scope.$watch('[' + attrs.ngModel + ', ' + attrs.match + ']', function(value){
							ctrl.$setValidity('match', value[0] === value[1] );
						}, true);
					}
				}
			}])
			.directive('upper', [function () {
				return{
					require: 'ngModel',
					controllerAs: 'vm',
					link: function(scope, elem, attrs, ctrl) {
						scope.$watch(attrs.ngModel, function(value) {
							if(value && value.length > 0){
								ctrl.$setViewValue(value.toUpperCase());
								ctrl.$render();
							}
						});
					}
				}
			}]);

		</script>
		
	</body>
</html>




